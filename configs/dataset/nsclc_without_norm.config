from dpipe.dataset.wrappers import cache_methods, apply
from fbp_aug.dataset import Dataset
from fbp_aug.path import nsclc_data_path

min_clip = -1350
max_clip = 150

data_path = nsclc_data_path
modalities = ['CT']

dataset = cache_methods(
    instance=apply(
        instance=Dataset(
            data_path=data_path,
            modalities=modalities,
            new_spacing=(1, 1, None)
        )
    ),
    methods=['image', 'lungs']
)

ids = dataset.ids
load_x = dataset.image
load_y = dataset.lungs
